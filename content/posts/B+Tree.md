---
title: "B+Tree"
date: 2025-01-22T10:34:28+08:00
lastmod: 2025-01-22T10:34:28+08:00
author: ["tkk"]

categories: ["数据库"]
  
tags: ["数据库"]

keywords: ["索引"]

draft: true # 是否为草稿
description: "B+树介绍" # 文章描述，与搜索优化相关
summary: "B+树介绍" # 文章简单描述，会展示在主页
weight: # 输入1可以顶置文章，用来给文章展示排序，不填就默认按时间排序
slug: ""
draft: false # 是否为草稿
comments: true
showToc: true # 显示目录
TocOpen: true # 自动展开目录
autoNumbering: true # 目录自动编号
hideMeta: false # 是否隐藏文章的元信息，如发布日期、作者等
disableShare: true # 底部不显示分享栏
searchHidden: false # 该页面可以被搜索到
showBreadcrumbs: true #顶部显示当前路径
cover:
    image: ""
    caption: ""
    alt: ""
    relative: false
---

<!-- more -->

B+树是一种树数据结构，广泛应用于数据库和文件系统中，用于高效地存储和检索数据。B+树是B树的一种变体，它在B树的基础上进行了优化，使其更适合于磁盘存储和范围查询。B+树的特点是能够保持数据稳定有序，其插入与修改拥有较稳定的对数时间复杂度。
## 基本B树
### B树基本结构
B树的每个节点可以包含多个键值对和指向子节点的指针。B树的每个节点通常包含以下内容：
- 键（Key）：用于排序和导航的值。
- 数据记录（Data Record）：实际存储的数据或指向数据记录的指针。
- 子节点指针（Child Pointers）：指向子节点的指针。
一个d阶b树中每个节点最多包含2d个键和2d+1个指针，最少包含d个键和d+1个指针。B树在磁盘存储中非常高效，因为每个节点可以存储多个的键值对，减少了磁盘I/O操作的次数。
### B树特点
- 平衡性。B树是一种平衡树，所有叶子节点都在同一层。这意味着从根节点到任意叶子节点的路径长度是相同的，确保了查询操作的时间复杂度为O(log n)。
- 多路搜索。B树的每个节点可以包含多个键和指针，因此它是一种多路搜索树。这使得B树在磁盘存储中非常高效，因为每个节点可以存储更多的键值对，减少了磁盘I/O操作的次数，I/O操作次数不超过logd(n)(d为B树的阶数）。
- 插入和删除操作。B树的插入和删除操作通常需要维护树的平衡性。插入操作可能会导致节点分裂，删除操作可能会导致节点合并。这些操作确保了树的高度保持在合理范围内，从而保持查询效率。
### B树的操作
-  查询操作。B树的查询操作类似于二叉搜索树的查询操作，但B树是多路搜索树，因此需要遍历多个子节点。查询操作的时间复杂度为O(log n)。
-  插入操作。插入操作首先需要找到合适的叶子节点来插入新键值对。如果叶子节点已满，则需要进行节点分裂操作。节点分裂操作将节点分成两个节点，并将中间键提升到父节点中。插入操作的时间复杂度为O(log n)。
- 删除操作。删除操作首先需要找到包含要删除键的节点。如果删除键后节点中的键数量不足，则需要进行节点合并操作。节点合并操作将相邻节点合并成一个节点，并将多余的键提升到父节点中。删除操作的时间复杂度为O(log n)。
## B树变种B+树
B+树相对于B树的变化：
-  存储位置：B+树的内部节点仅包含键和子节点指针，实际的数据记录存储在叶子节点中。叶子节点之间通过指针连接，形成一个有序链表。
-  查询范围：B+树相对B树在顺序查找方面更加高效，因为叶子节点通过指针连接成一个有序链表。只需要从起始叶子节点开始遍历链表，直到找到结束叶子节点即可。
- 空间效率：相比B树，B+树的内部节点仅包含键和子节点指针，所有的数据记录均在叶子节点中，这使得内部节点的空间利用率更高。
- 查询效率：相比与B树，B+树将叶子节点通过指针连接，使得B+树在对文件进行顺序处理时拥有远超B树的效率。
B+树在B树的基础上进行了优化，使其更适合于磁盘存储和范围查询，因此在现代数据存储和检索系统中更为常见。B+树通过将数据存储在叶子节点中，并使用内部节点进行导航，实现了高效的查询、插入、删除和范围查询操作。B+树的平衡性和多路搜索特性使得它在处理大量数据时表现出色，是现代数据存储和检索系统中的重要数据结构。